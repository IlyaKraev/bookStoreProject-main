<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>BookStore</title>
    <link rel="stylesheet" href="../../../../static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora">
    <link rel="stylesheet" href="../../../../static/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="../../../../static/fonts/ionicons.min.css">
    <link rel="stylesheet" href="../../../../static/css/styles.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
</head>

<body>
    <nav class="navbar navbar-light navbar-expand-lg navigation-clean-button" style="background-color: rgb(183,183,183);">
        <div class="container">
            <a class="navbar-brand" href="#"><img src="../../../../static/img/logo.png" style="height: auto;width: 50px;">Books &amp; Readables</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav mr-auto">
                    <li class="nav-item" role="presentation"><a class="nav-link active" href="#">Home</a></li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Explore</a>
                        <div class="dropdown-menu" role="menu" style="background-color: rgba(183,183,183,0.86);"><a class="dropdown-item" role="presentation" href="#"><strong>Free</strong></a><a class="dropdown-item" role="presentation" href="#"><strong>Category 1</strong></a><a class="dropdown-item" role="presentation" href="#"><strong>Category 2</strong></a>
                            <a class="dropdown-item" role="presentation" href="#"><strong>Category 3</strong></a>
                        </div>
                    </li>
                    <li class="nav-item" role="presentation"></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="#">Contact Us</a></li>
                </ul>
                <form class="form-inline mr-auto" target="_self">
                    <div class="form-group"><label for="search-field"><a href="#"><i class="fa fa-search" style="color: rgb(0,0,0);padding: 6px;"></i></a></label><input class="form-control search-field" type="search" id="search-field" name="search"></div>
                </form><span class="navbar-text actions"> <a class="login" href="#">Log In</a><a class="btn btn-light action-button" role="button" href="#" style="background-color: rgb(255,167,103);">Sign Up</a></span></div>
        </div>
    </nav>
    <nav class="navbar navbar-light navbar-expand-md navigation-clean" style="background-color: rgba(255,167,103,0.57);">
        <div class="container"><a class="navbar-brand" href="#">Admin Panel</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item" role="presentation"><a class="nav-link" href="#">First Item</a></li>
                    <li class="nav-item" role="presentation"><a class="nav-link" href="#">Second Item</a></li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Orders</a>
                        <div class="dropdown-menu" role="menu" style="background-color: rgb(217,192,174);"><a class="dropdown-item" role="presentation" href="#">View</a><a class="dropdown-item" role="presentation" href="#">Add new</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a>
                            <div class="dropdown-divider" role="presentation"></div><span class="dropdown-item-text" role="presentation"><strong>Order Details</strong></span><a class="dropdown-item" role="presentation" href="#">View</a><a class="dropdown-item" role="presentation" href="#">Add new</a>
                            <a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation" href="#">Delete</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Users</a>
                        <div class="dropdown-menu" role="menu" style="background-color: rgb(217,192,174);"><a class="dropdown-item" role="presentation" href="#">View</a><a class="dropdown-item" role="presentation" href="#">Add new</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Pricings</a>
                        <div class="dropdown-menu" role="menu" style="background-color: rgb(217,192,174);"><a class="dropdown-item" role="presentation" href="#">View</a><a class="dropdown-item" role="presentation" href="#">Add new</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Books</a>
                        <div class="dropdown-menu" role="menu" style="background-color: rgb(217,192,174);"><a class="dropdown-item" role="presentation" href="#">View Existing</a><a class="dropdown-item" role="presentation" href="#">Add new</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Publishers</a>
                        <div class="dropdown-menu" role="menu" style="background-color: #d9c0ae;"><a class="dropdown-item" role="presentation" href="#">View Existing</a><a class="dropdown-item" role="presentation" href="#">Add New</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Authors</a>
                        <div class="dropdown-menu" role="menu" style="background-color: #d9c0ae;"><a class="dropdown-item" role="presentation" href="#">View Existing</a><a class="dropdown-item" role="presentation" href="#">Add New</a><a class="dropdown-item" role="presentation" href="#">Update</a><a class="dropdown-item" role="presentation"
                                href="#">Delete</a></div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <form id="contactForm" action="javascript:void();" method="get">
            <div class="form-row text-left" style="padding: 0px;">
                <div class="col-md-6 col-xl-12" id="message">
                    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css" rel='stylesheet' type='text/css'>

                    <div class="container">
                        <div class="row">

                            <p></p>
                            <h1>View All Authors</h1>
                            <p> </p>
                            <p> </p>

                            <div class="col-md-10 col-md-offset-1">

                                <div class="panel panel-default panel-table">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col col-xs-6">
                                            </div>
                                            <div class="col col-xs-6 text-right">
                                                <a type="button" href="New Author.html" class="btn btn-sm btn-secondary btn-create">Create New</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                        <table class="table table-striped table-bordered table-list">
                                            <thead>
                                                <tr>
                                                    <th><em class="fa fa-cog"></em></th>
                                                    <th class="hidden-xs">ID</th>
                                                    <th>First Name</th>
                                                    <th>Last Name</th>
                                                    <th>Country</th>
                                                </tr>
                                            </thead>
                                            <tbody id="dataTable">
                                                <tr>
                                                    <td>
                                                        <a class="btn btn-default"><em class="fa fa-pencil"></em></a>
                                                        <a class="btn btn-danger"><em class="fa fa-trash"></em></a>
                                                    </td>
                                                    <td class="hidden-xs">1</td>
                                                    <td>John</td>
                                                    <td>Doe</td>
                                                    <td>Johndoenistan</td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                    <div class="panel-footer">
                                        <div class="row">
                                            <div class="col col-xs-4">Page 1 of 5
                                            </div>
                                            <div class="col col-xs-8">
                                                <ul class="pagination hidden-xs pull-right">
                                                    <li><a href="#">1</a></li>
                                                    <li><a href="#">2</a></li>
                                                    <li><a href="#">3</a></li>
                                                    <li><a href="#">4</a></li>
                                                    <li><a href="#">5</a></li>
                                                </ul>
                                                <ul class="pagination visible-xs pull-right">
                                                    <li><a href="#">«</a></li>
                                                    <li><a href="#">»</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="footer-dark" style="background-color: rgb(183,183,183);color: rgb(0,0,0);">
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-3 item">
                        <h3>Shop</h3>
                        <ul>
                            <li><a href="#">Free books</a></li>
                            <li><a href="#">Explore books</a></li>
                            <li><a href="#">Comics &amp; manga</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <h3>Payment</h3>
                        <ul>
                            <li><a href="#">Methods of Payment&nbsp;</a></li>
                            <li><a href="#">How our credit system works</a></li>
                            <li><a href="#">Fill up my wallet</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-6 col-md-3 item">
                        <h3>About</h3>
                        <ul>
                            <li><a href="#">Company</a></li>
                            <li><a href="#">Team</a></li>
                            <li><a href="#">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col item social"><a href="#" style="color: rgb(0,0,0);"><i class="icon ion-social-facebook"></i></a><a href="#"><i class="icon ion-social-twitter" style="color: rgb(0,0,0);"></i></a><a href="#"><i class="icon ion-social-snapchat" style="color: rgb(0,0,0);"></i></a>
                        <a href="#"><i class="icon ion-social-instagram" style="color: rgb(0,0,0);"></i></a>
                    </div>
                </div>
                <p class="copyright"><strong>Books &amp; Readables © 2020</strong></p>
            </div>
        </footer>
    </div>
    <script src="../../../../static/js/jquery.min.js"></script>
    <script src="../../../../static/bootstrap/js/bootstrap.min.js"></script>

    <script>
        $.ajax({
            url: "http://localhost:8080/api/author/getall",
            type: "GET",
            contentType: "application/json",
            // cors: true,
            success: function(data) {
                var obj = data.authors;
                console.log(obj);

                var r = new Array(),
                    j = -1;
                for (var key = 0, size = obj.length; key < size; key++) {

                    var id = obj[key].authorId;
                    var firstName = obj[key].firstName;
                    var lastName = obj[key].lastName;

                    var url = id + ', ' + firstName + ', ' + lastName;
                    console.log(url);

                    r[++j] = '<tr><td><a class="btn btn-default" href="Update Author.html?authorid=' + obj[key].authorId + '"><em class="fa fa-pencil"></em></a>' +
                        '<a class="btn btn-danger" href="javascript:deleteEntity(' + id + ')" ><em class="fa fa-trash"></em></a>';
                    r[++j] = '</td><td>';
                    r[++j] = obj[key].authorId;
                    r[++j] = '</td> <td>';
                    r[++j] = obj[key].firstName;
                    r[++j] = '</td><td>';
                    r[++j] = obj[key].lastName;
                    r[++j] = '</td><td>';
                    r[++j] = obj[key].country;
                    r[++j] = '</td></tr>';




                    $('#dataTable').html(r.join(''));
                }

            },
            error: function(jqXHR, textStatus, errorThrown) {}

        });

        function deleteEntity(id) {
            var answer = window.confirm("Delete author ?");

            if (answer) {
                $.ajax({
                    url: "http://localhost:8080/api/author/delete/" + id,
                    type: "DELETE",
                    contentType: "application/json",
                    // cors: true,
                    success: function(data) {
                        alert("Author deleted!");
                    }
                });
            } else {
                alert("Author shall remain");
            }
        };
    </script>
</body>

</html>